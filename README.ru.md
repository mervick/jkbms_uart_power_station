# –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞—Ä—è–¥–∫–∏ JK BMS –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏–∏

[–†—É –≤–µ—Ä—Å–∏—è](README.ru.md) | [English](README.md)

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –±–∞—Ç–∞—Ä–µ–∏ —á–µ—Ä–µ–∑ **JK BMS** (JiKong) –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–º –∑–∞—Ä—è–¥–∫–∏ —Å –ø–æ–º–æ—â—å—é —Ä–µ–ª–µ.

–ú–æ–¥—É–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ **Arduino Pro Micro** (ATmega32U4) –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π UART –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–≤—è–∑–∏ —Å BMS.

–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –º–∏–∫—Ä–æ–∑–∞–ø—É—Å–∫–∏, –æ—Ç–∫–ª—é—á–∞—è –∑–∞—Ä—è–¥–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ **100% SOC** –∏ –ø–∞–¥–µ–Ω–∏–∏ —Ç–æ–∫–∞ –∑–∞—Ä—è–¥–∞ –Ω–∏–∂–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞ –Ω–∞—Å—ã—â–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, **0.8A**).

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–π UART**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π –ø–æ—Ä—Ç Serial1 –Ω–∞ Pro Micro –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Å–≤—è–∑–∏ —Å BMS.
- **–£–º–æ—á–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Ç–æ–∫ –∏ SOC –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –∞–∫—Ç–∏–≤–∏—Ä—É—è —Ä–µ–ª–µ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∑–∞—Ä—è–¥–∫–∏.

---

## –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞: Arduino Pro Micro

Arduino Pro Micro –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ–º–ø–∞–∫—Ç–Ω—ã–º —Ä–∞–∑–º–µ—Ä–∞–º –∏ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–º—É –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–º—É Serial –ø–æ—Ä—Ç—É (`Serial1`).

### –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü–∏–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ | –ü–∏–Ω Pro Micro | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- | :--- |
| **BMS UART** | **GND** | **GND** | –û–±—â–∏–π GND |
| **BMS UART** | **TX** | **RX (Pin 0)** | –î–∞–Ω–Ω—ã–µ –æ—Ç BMS –∫ Pro Micro |
| **BMS UART** | **RX** | **TX (Pin 1)** | –ö–æ–º–∞–Ω–¥—ã –æ—Ç Pro Micro –∫ BMS |
| **BMS UART** | **B+ (VCC)** | **–ù–ï –ü–û–î–ö–õ–Æ–ß–ê–¢–¨** | **–û–ü–ê–°–ù–û: –ü–æ–ª–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –±–∞—Ç–∞—Ä–µ–∏!** |
| **–ú–æ–¥—É–ª—å —Ä–µ–ª–µ** | **Signal / IN** | **Pin 3** | –°–∏–≥–Ω–∞–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ª–µ |
| **–ú–æ–¥—É–ª—å —Ä–µ–ª–µ** | **GND** | **GND** | –û–±—â–∏–π GND |
| **–ü–∏—Ç–∞–Ω–∏–µ** | **+5V** | **RAW** | –û—Å–Ω–æ–≤–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ Arduino |
| **–ü–∏—Ç–∞–Ω–∏–µ** | **GND** | **GND** | –ó–µ–º–ª—è –ø–∏—Ç–∞–Ω–∏—è |

&nbsp;  

> [!CAUTION]  
> ‚ö†Ô∏è –í–´–°–û–ö–û–ï –ù–ê–ü–†–Ø–ñ–ï–ù–ò–ï –Ω–∞ —Ä–∞–∑—ä–µ–º–µ BMS UART! >
> 
> –ü–æ—Ä—Ç —Å–≤—è–∑–∏ BMS (–≥–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –∫–æ–Ω—Ç–∞–∫—Ç—ã UART) –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –ø–∏–Ω, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–π > –Ω–∞–ø—Ä—è–º—É—é –∫ –ø–ª—é—Å—É –±–∞—Ç–∞—Ä–µ–∏ (B+).  
> –≠—Ç–æ—Ç –ø–∏–Ω –Ω–µ—Å–µ—Ç –ü–û–õ–ù–û–ï –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 12V, 24V, 48V+ –∏ –≤—ã—à–µ).
> 
> –ù–ò–ö–û–ì–î–ê –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–π—Ç–µ –µ–≥–æ –∫ Arduino! –û—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –Ω–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º –∏–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é > –æ–±—Ä–µ–∂—å—Ç–µ —ç—Ç–æ—Ç –ø—Ä–æ–≤–æ–¥.  
> –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Å–º–µ—Ä—Ç—å Arduino –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞! üí•


---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ü–û

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Arduino IDE

–î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–¥–∞ –Ω–∞ Pro Micro:

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Tools** -> **Board**.
2. –í—ã–±–µ—Ä–∏—Ç–µ **Arduino Leonardo** –∏–ª–∏ **Arduino Micro** (Pro Micro —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –∏–¥–µ–Ω—Ç–∏—á–µ–Ω Leonardo).
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π **Port**:
* **macOS**: `/dev/cu.usbmodem...`
* **Ubuntu**: `/dev/ttyACM0` (–£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∞—Ö: `sudo usermod -a -G dialout $USER`).

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í —Ñ–∞–π–ª–µ `.ino` –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `JKBMSInterface` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `&Serial1`. –≠—Ç–æ —Ä–∞–∑–¥–µ–ª—è–µ—Ç –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏ (USB `Serial`) –∏ —Å–≤—è–∑—å —Å BMS (–∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø–∏–Ω—ã 0 –∏ 1 `Serial1`).

```cpp
Serial1.begin(115200);
// –≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –≤ —Ñ–∞–π–ª–µ .ino –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –ø–∏–Ω—ã Pro Micro (0 –∏ 1)
JKBMSInterface bms(&Serial1);
```

---

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö**: –ö–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ –ú–ö –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —É BMS —á–µ—Ä–µ–∑ `Serial1`.
2. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–∏–∫–∞**: –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ç–æ–∫ –∑–∞—Ä—è–¥–∞.
3. **–¢—Ä–∏–≥–≥–µ—Ä –æ—Ç–∫–ª—é—á–µ–Ω–∏—è**: –ï—Å–ª–∏ `SOC == 100%` –ò —Ç–æ–∫ `<= 0.8A` (–∏ —Ç–æ–∫ —Å–Ω–∏–∂–∞–µ—Ç—Å—è), –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è `RELAY_PIN` (Pin 3).
4. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –ü–æ—Å–ª–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∂–∏–º `IDLE`, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –∑–∞—Ä—è–¥–∫–∏.

---

## –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ API (`JKBMSInterface`)

| –ú–µ—Ç–æ–¥ | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
| --- | --- | --- |
| `getSOC()` | `uint8_t` | –£—Ä–æ–≤–µ–Ω—å –∑–∞—Ä—è–¥–∞ –≤ % (0-100) |
| `getVoltage()` | `float` | –û–±—â–µ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –±–∞—Ç–∞—Ä–µ–∏ |
| `getCurrent()` | `float` | –ê–º–ø–µ—Ä (–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π = –†–∞–∑—Ä—è–¥, –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π = –ó–∞—Ä—è–¥) |
| `getCellVoltage(i)` | `float` | –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ —è—á–µ–π–∫–∏ —Å –∏–Ω–¥–µ–∫—Å–æ–º `i` |
| `isCharging()` | `bool` | `true` –µ—Å–ª–∏ —Ç–æ–∫ –ø–æ—Å—Ç—É–ø–∞–µ—Ç –≤ –±–∞—Ç–∞—Ä–µ—é [1] |

